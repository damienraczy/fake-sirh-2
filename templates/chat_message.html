# templates/components/chat_message.html
<div class="mb-4 {{ 'text-right' if role == 'user' else 'text-left' }}">
    <div class="inline-block max-w-xs lg:max-w-md px-4 py-2 rounded-lg {{ 
        'bg-blue-600 text-white' if role == 'user' else 'bg-white border border-gray-200'
    }}">
        {{ content }}
        {% if metadata and role == 'assistant' %}
        <div class="mt-2 text-xs text-gray-500">
            <span class="bg-gray-200 px-2 py-1 rounded mr-2">📊 {{ metadata.query_type }}</span>
            <span class="bg-gray-200 px-2 py-1 rounded mr-2">📚 {{ metadata.sources|length }} sources</span>
            <span class="bg-gray-200 px-2 py-1 rounded">⏱️ {{ metadata.response_time }}s</span>
        </div>
        {% endif %}
    </div>
</div>
